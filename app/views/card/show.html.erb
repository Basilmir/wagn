<%- 
slot = get_slot
item = symbolize_param(:item) and slot.item_format = item
view = symbolize_param(:view) 
view = :open if [:closed, :line,:open,:card,:view, nil].member?(view)  
#line, card, and view are deprecated
#Why is it that we're converting closed and line here??
%>

<%= slot.render(view, :add_javascript=>true, :add_slot=>false, :view=>view, :showname=>nil ) %>
<% if view == :open %>
  <%= javascript_tag("Wagn.line_to_paragraph(getSlotFromContext('#{@context}'))") %>
<% end %>
