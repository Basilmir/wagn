<%- 
view = render_arg(:view) 
view = :open if [:closed, :line,:open,:card,:view, nil].member?(view)

slot = get_slot
if item = render_arg(:item)
  slot.item_format = item
end
%>

<%= slot.render(view, :is_slot => !request.xhr?, :add_javascript=>true ) %>

<% if request.xhr? && view == :open %>
  <%= javascript_tag("Wagn.line_to_paragraph(getSlotFromContext('#{@context}'))") %>
<% end %>