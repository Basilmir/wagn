<html>
  <head>
	  <%= render :partial=>'layouts/head' %>
  </head>
  
  <body class="wagn">
	  <%# FIXME: the body has a css identifier because the wikiwyg editor has a different "body", currently sans identifier.  Kind of a hack, but it means that we can set defaults for wagn pages that are different from defaults for html within a card.  One shallow issue is that 'wagn' should be an id, not a class, but that will break lots of local.css files, so we should be deliberate about changing this. %>	
	  
		<%= render :partial=>'layouts/top_menu' %>
		
		<div id="page-left">
	
	<%# FIXME: should always be visible to user when/where error occurs.  It will also help us move towards a better generic templating system if we get this out of this central position.  (I don't think it should just be a snippet -- users shouldn't be able to exclude the alerts...) %>		
			<div id="alerts">
				<div id="notice"><%= flash[:notice] %></div>
				<div id="error"><%= flash[:error] %></div>  
			</div>
			
			<div id="main">
				<%= yield %>
				<%# This is admittedly odd to access this from all pages and decide then whether we're looking at a card 
            (and we may need a better test for that), but if we want users to be able to lay out the related cards,
           without adding too much complexity to user-accessible templating, I think this may be the best way. %>
        
				<%= related %>
			</div>
		</div>

		<div id="page-right">
			<div id="sidebar">
				<%= sidebar %>
				<%= render :partial=>'admin/navigation' %><%# FIXME: move this into a card somehow? %>			  
			</div>
		</div>
    
  <%# FIXME: this doesn't drop when the sidebar cards are opened, because page-right %>
    <div id="bottom-menu">
      <%= render :partial=>'layouts/bottom_menu' %>
    </div>
    
    
  </body>
</html>

