<html>
  <%= render :partial=>'layouts/head' %>
  
  <body class="wagn">
	  <%# FIXME: the body has a css identifier because the wikiwyg editor has a different "body", currently sans identifier.  Kind of a hack, but it means that we can set defaults for wagn pages that are different from defaults for html within a card.  One shallow issue is that 'wagn' should be an id, not a class, but that will break lots of local.css files, so we should be deliberate about changing this. %>	
	  		
  <%= render :partial=>'layouts/top_menu' %>

  <%# params.inspect %>

  <div id="page-right">
	  <%= render :partial=>'layouts/logo' %>

		<div id="sidebar" context="sidebar">
			<% if sidebar_card = CachedCard.get_real("*sidebar")  %>
				<%= WagnHelper::Slot.new(sidebar_card, "sidebar_1", "view", self).render(:raw) %>
			<% end %>
			<%= render :partial=>'admin/navigation' %><%# FIXME: move this into a card somehow? %>			  
		</div>
		
    <%= render :partial=>'layouts/bottom_menu' %>
	</div>

  <div  id="page-left">
    <%= render :partial=>'layouts/alerts' %>
		<div id="main" context="main"><%= yield %></div>
	</div>  

  <% if ga_key_card = CachedCard.get_real("*google analytics key") %>
		<script type="text/javascript">
			var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
			document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		</script>
		<script type="text/javascript">
			var pageTracker = _gat._getTracker('<%= ga_key_card.content %>');
			pageTracker._trackPageview();
		</script>
  <% end %>


  </body>
</html>

